<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Setting up bots - ClusterFuzz</title> <link rel="shortcut icon" href="/clusterfuzz-document-cn/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/clusterfuzz-document-cn/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-88024544-3"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-88024544-3'); </script> <script type="text/javascript" src="/clusterfuzz-document-cn/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/clusterfuzz-document-cn/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Setting up bots | ClusterFuzz</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Setting up bots" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation for ClusterFuzz" /> <meta property="og:description" content="Documentation for ClusterFuzz" /> <link rel="canonical" href="/clusterfuzz-document-cn/production-setup/setting-up-bots/" /> <meta property="og:url" content="/clusterfuzz-document-cn/production-setup/setting-up-bots/" /> <meta property="og:site_name" content="ClusterFuzz" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Setting up bots" /> <script type="application/ld+json"> {"@type":"WebPage","headline":"Setting up bots","description":"Documentation for ClusterFuzz","url":"/clusterfuzz-document-cn/production-setup/setting-up-bots/","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/clusterfuzz-document-cn/" class="site-title lh-tight"> ClusterFuzz </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/" class="nav-list-link">ClusterFuzz</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/architecture/" class="nav-list-link">Architecture</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/getting-started/" class="nav-list-link">Getting started</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/getting-started/prerequisites/" class="nav-list-link">Prerequisites</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/getting-started/local-instance/" class="nav-list-link">Running a local instance</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/setting-up-fuzzing/" class="nav-list-link">Setting up fuzzing</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/setting-up-fuzzing/libfuzzer-and-afl/" class="nav-list-link">libFuzzer and AFL++</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/setting-up-fuzzing/blackbox-fuzzing/" class="nav-list-link">Blackbox fuzzing</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/setting-up-fuzzing/heartbleed-example/" class="nav-list-link">Heartbleed example</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/production-setup/" class="nav-list-link">Production setup</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/production-setup/clusterfuzz/" class="nav-list-link">ClusterFuzz</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/production-setup/build-pipeline/" class="nav-list-link">Build pipeline</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/production-setup/setting-up-fuzzing-job/" class="nav-list-link">Setting up a fuzzing job</a></li><li class="nav-list-item active"><a href="/clusterfuzz-document-cn/production-setup/setting-up-bots/" class="nav-list-link active">Setting up bots</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/using-clusterfuzz/" class="nav-list-link">Using ClusterFuzz</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/using-clusterfuzz/ui-overview/" class="nav-list-link">UI overview</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/using-clusterfuzz/workflows/" class="nav-list-link">Workflows</a><ul class="nav-list"><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/workflows/triaging-new-crashes/" class="nav-list-link">Triaging new crashes</a> </li><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/workflows/fixing-a-bug/" class="nav-list-link">Fixing a bug</a> </li><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/workflows/analyzing-fuzzing-performance/" class="nav-list-link">Analyzing fuzzer performance</a> </li><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/workflows/uploading-a-testcase/" class="nav-list-link">Uploading a testcase</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/using-clusterfuzz/advanced/" class="nav-list-link">Advanced features</a><ul class="nav-list"><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/advanced/access-control/" class="nav-list-link">Access control</a> </li><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/advanced/code-coverage/" class="nav-list-link">Code coverage</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/contributing-code/" class="nav-list-link">Contributing code</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/contributing-code/source-code/" class="nav-list-link">Source code</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/contributing-code/running-unit-tests/" class="nav-list-link">Running unit tests</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/contributing-code/staging-changes/" class="nav-list-link">Staging changes</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/reference/" class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/reference/glossary/" class="nav-list-link">Glossary</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/reference/coverage-guided-vs-blackbox/" class="nav-list-link">Coverage guided vs blackbox fuzzing</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/reference/job-definition/" class="nav-list-link">Job definition</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/reference/faq/" class="nav-list-link">FAQ</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search ClusterFuzz" aria-label="Search ClusterFuzz" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/google/clusterfuzz" class="site-button" > ClusterFuzz on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/clusterfuzz-document-cn/production-setup/">Production setup</a></li> <li class="breadcrumb-nav-list-item"><span>Setting up bots</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="setting-up-bots"> <a href="#setting-up-bots" class="anchor-heading" aria-labelledby="setting-up-bots"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up bots </h1> <p>This page walks you through the process of setting up bots on each of the supported platforms: <strong>Linux</strong>, <strong>Windows</strong> and <strong>macOS</strong>.</p> <ul id="markdown-toc"> <li><a href="#setting-up-bots" id="markdown-toc-setting-up-bots">Setting up bots</a> <ul> <li><a href="#platforms" id="markdown-toc-platforms">Platforms</a> <ul> <li><a href="#linux" id="markdown-toc-linux">Linux</a></li> <li><a href="#windows" id="markdown-toc-windows">Windows</a></li> <li><a href="#macos" id="markdown-toc-macos">macOS</a></li> </ul> </li> <li><a href="#configuration" id="markdown-toc-configuration">Configuration</a> <ul> <li><a href="#google-compute-engine-cluster" id="markdown-toc-google-compute-engine-cluster">Google Compute Engine Cluster</a></li> <li><a href="#google-compute-engine-instance-template" id="markdown-toc-google-compute-engine-instance-template">Google Compute Engine Instance Template</a></li> <li><a href="#windows-password-setup" id="markdown-toc-windows-password-setup">Windows password setup</a></li> <li><a href="#deploying-new-changes" id="markdown-toc-deploying-new-changes">Deploying new changes</a></li> </ul> </li> <li><a href="#verification" id="markdown-toc-verification">Verification</a> <ul> <li><a href="#google-compute-engine-bots" id="markdown-toc-google-compute-engine-bots">Google Compute Engine bots</a></li> <li><a href="#non-google-compute-engine-bots" id="markdown-toc-non-google-compute-engine-bots">Non-Google Compute Engine bots</a></li> </ul> </li> </ul> </li> </ul><hr /> <h2 id="platforms"> <a href="#platforms" class="anchor-heading" aria-labelledby="platforms"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Platforms </h2> <h3 id="linux"> <a href="#linux" class="anchor-heading" aria-labelledby="linux"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Linux </h3> <p>Linux is the preferred platform for fuzzing because of its comprehensive support for all <a href="/clusterfuzz-document-cn/reference/glossary/#sanitizer">sanitizer</a> and <a href="/clusterfuzz-document-cn/reference/glossary/#fuzzing-engine">fuzzing engine</a> types.</p> <p>It is recommended to use each sanitizer its own <a href="/clusterfuzz-document-cn/production-setup/build-pipeline/">build</a> and <a href="/clusterfuzz-document-cn/reference/glossary/#job-type">job</a> definition (except <a href="https://clang.llvm.org/docs/LeakSanitizer.html">LeakSanitizer</a>), as there are performance and bug finding efficiency issues with combining them.</p> <p>By default, the ClusterFuzz configuration file creates 1 regular Linux bot and 2 <a href="/clusterfuzz-document-cn/architecture/#fuzzing-bots">preemptible</a> Linux bots on <a href="https://cloud.google.com/compute">Google Compute Engine</a>. You can configure them by following the instructions provided <a href="#google-compute-engine-cluster">here</a> and <a href="#google-compute-engine-instance-template">here</a>.</p> <p>We recommend that you use preemptibles for most of your bots because they are much cheaper and perform almost as well. You still need some regular bots (non-preemptibles) to execute other tasks, such as the tasks that run after a crash is discovered (minimization, regression, etc).</p> <h3 id="windows"> <a href="#windows" class="anchor-heading" aria-labelledby="windows"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Windows </h3> <p>Windows is a supported platform for fuzzing. The only <a href="/clusterfuzz-document-cn/reference/glossary/#sanitizer">sanitizer</a> supported on Windows is <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a>. The only <a href="/clusterfuzz-document-cn/reference/glossary/#fuzzing-engine">fuzzing engine</a> supported on Windows is <a href="https://llvm.org/docs/LibFuzzer.html">libFuzzer</a>.</p> <p>By default, ClusterFuzz configuration files do not enable any Windows bots. You can enable them easily by following the instructions provided <a href="#google-compute-engine-cluster">here</a> and <a href="#google-compute-engine-instance-template">here</a>.</p> <p>You also need to <a href="#windows-password-setup">set a password</a> for the administrator account on the bots.</p> <h3 id="macos"> <a href="#macos" class="anchor-heading" aria-labelledby="macos"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> macOS </h3> <p>Mac is a supported platform for fuzzing. The sanitizers supported on Mac are <a href="https://clang.llvm.org/docs/AddressSanitizer.html">AddressSanitizer</a>, <a href="https://clang.llvm.org/docs/LeakSanitizer.html">LeakSanitizer</a>, <a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html">UndefinedBehaviorSanitizer</a> and <a href="https://clang.llvm.org/docs/ThreadSanitizer.html">ThreadSanitizer</a>. The only <a href="/clusterfuzz-document-cn/reference/glossary/#fuzzing-engine">fuzzing engine</a> supported on Mac is <a href="https://llvm.org/docs/LibFuzzer.html">libFuzzer</a>.</p> <p>Mac is not a supported platform on <a href="https://cloud.google.com/compute">Google Compute Engine</a>, so you would need to run it on physical hardware or some sort of virtualization running on top of it.</p> <p>Below are the steps to set up and run ClusterFuzz:</p> <ul> <li>Create a service account key following the instructions provided <a href="https://cloud.google.com/docs/authentication/getting-started">here</a>. <ul> <li>Choose “Compute Engine” service account type.</li> <li>Choose “JSON” key type.</li> </ul> </li> <li>Securely transfer the downloaded key file to the macOS computer.</li> <li>Run the provided startup script.</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">CLOUD_PROJECT_ID</span><span class="o">=</span>&lt;your project <span class="nb">id</span><span class="o">&gt;</span>
<span class="nb">export </span><span class="nv">CONFIG_DIR</span><span class="o">=</span>/path/to/myconfig
<span class="nb">export </span><span class="nv">GOOGLE_APPLICATION_CREDENTIALS</span><span class="o">=</span>/path/to/service-account-key.json
<span class="nb">export </span><span class="nv">INSTALL_DIRECTORY</span><span class="o">=</span>/path/where/to/install/clusterfuzz-and-dependencies/to
<span class="nv">$CONFIG_DIR</span>/bot/setup/mac.bash
</code></pre></div></div> <h2 id="configuration"> <a href="#configuration" class="anchor-heading" aria-labelledby="configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration </h2> <h3 id="google-compute-engine-cluster"> <a href="#google-compute-engine-cluster" class="anchor-heading" aria-labelledby="google-compute-engine-cluster"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Google Compute Engine Cluster </h3> <p>You can configure a cluster of bots on <a href="https://cloud.google.com/compute">Google Compute Engine</a> by modifying the configuration file <code class="language-plaintext highlighter-rouge">$CONFIG_DIR/gce/clusters.yaml</code>. The clusters definition is in the <code class="language-plaintext highlighter-rouge">&lt;your project id&gt;/clusters</code> attribute of this yaml file. Below are example definitions for <a href="/clusterfuzz-document-cn/architecture/#fuzzing-bots">preemptible</a> and regular Linux bots:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Regular bots run all task types (e.g fuzzing, minimize, etc).</span>
clusterfuzz-linux:
  gce_zone: gce-zone
  instance_count: 1
  instance_template: clusterfuzz-linux
  distribute: False

<span class="c"># Pre-emptible bots must have '-pre-' in name. They only run fuzzing tasks.</span>
clusterfuzz-linux-pre:
  gce_zone: gce-zone
  instance_count: 2
  instance_template: clusterfuzz-linux-pre
  distribute: False
</code></pre></div></div> <p>You can configure the bots by first uncommenting the cluster definition, and then changing the values in the <code class="language-plaintext highlighter-rouge">gce_zone</code> (e.g. <code class="language-plaintext highlighter-rouge">us-central1-a</code>) and <code class="language-plaintext highlighter-rouge">instance_count</code> attributes. You can also create your own <a href="#google-compute-engine-instance-template">instance template</a> and then define a new cluster section here.</p> <p><strong>Note</strong>:</p> <ul> <li>Make sure to <a href="#deploying-new-changes">deploy</a> new changes. Otherwise, they will not be reflected in production.</li> </ul> <h3 id="google-compute-engine-instance-template"> <a href="#google-compute-engine-instance-template" class="anchor-heading" aria-labelledby="google-compute-engine-instance-template"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Google Compute Engine Instance Template </h3> <p>You can read more about instance templates <a href="https://cloud.google.com/compute/docs/instance-templates">here</a>. Instance templates define the properties of a bot (e.g. source image, disk space, network config). They are defined after the clusters configuration section in <code class="language-plaintext highlighter-rouge">$CONFIG_DIR/gce/clusters.yaml</code>. Below is an example for a regular Linux bot:</p><pre><code class="language-aidl">instance_templates:
  - name: clusterfuzz-linux
    description: '{"version": 1}'
    properties:
      machineType: n1-standard-1
      disks:
        - boot: true
          autoDelete: true
          initializeParams:
            sourceImage: projects/cos-cloud/global/images/family/cos-stable
            diskSizeGb: 100
            diskType: pd-standard
      metadata:
        items:
          - key: docker-image
            value: gcr.io/clusterfuzz-images/base:c44bf3f-201902112042
          - key: user-data
            value: file://linux-init.yaml
      serviceAccounts:
        - email: my-project-id-service-account-email
          scopes:
            - https://www.googleapis.com/auth/cloud-platform
            - https://www.googleapis.com/auth/prodxmon
      networkInterfaces:
        - network: global/networks/default
          accessConfigs:
            - type: ONE_TO_ONE_NAT
              name: 'External NAT'
</code></pre><p>For example, you can configure the size of the disk using <code class="language-plaintext highlighter-rouge">diskSizeGb</code> attribute.</p> <p><strong>Note</strong>:</p> <ul> <li>After making a change in the instance template, you must increment the version by 1.</li> <li>Make sure to <a href="#deploying-new-changes">deploy</a> new changes. Otherwise, they will not be reflected in production.</li> </ul> <h3 id="windows-password-setup"> <a href="#windows-password-setup" class="anchor-heading" aria-labelledby="windows-password-setup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Windows password setup </h3> <p>Before enabling windows bots on <a href="https://cloud.google.com/compute">Google Compute Engine</a>, you need to set the administrator password in the <code class="language-plaintext highlighter-rouge">windows-password</code> metadata attribute. The password must satisfy the windows password policy requirements. To set it, run:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud compute project-info add-metadata <span class="se">\</span>
  <span class="nt">--metadata-from-file</span><span class="o">=</span>windows-password<span class="o">=</span>/path/to/password-file <span class="nt">--project</span><span class="o">=</span><span class="nv">$CLOUD_PROJECT_ID</span>
</code></pre></div></div> <p>This allows you to connect via remote desktop into your windows bots with the <code class="language-plaintext highlighter-rouge">clusterfuzz</code> username (admin) and your configured password.</p> <h3 id="deploying-new-changes"> <a href="#deploying-new-changes" class="anchor-heading" aria-labelledby="deploying-new-changes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Deploying new changes </h3> <p>Read the instructions <a href="/clusterfuzz-document-cn/production-setup/clusterfuzz/#deploying-new-changes">here</a> to deploy new changes.</p> <h2 id="verification"> <a href="#verification" class="anchor-heading" aria-labelledby="verification"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Verification </h2> <h3 id="google-compute-engine-bots"> <a href="#google-compute-engine-bots" class="anchor-heading" aria-labelledby="google-compute-engine-bots"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Google Compute Engine bots </h3> <p>Once deployed, bots are automatically created via an App Engine cron task that runs every <em>30 minutes</em>. For faster results, you can manually force it by visiting the <code class="language-plaintext highlighter-rouge">Cron jobs</code> page <a href="https://console.cloud.google.com/appengine/cronjobs">here</a> and running the <code class="language-plaintext highlighter-rouge">/manage-vms</code> cron job.</p> <p>After the cron job finishes, check this <a href="https://console.cloud.google.com/compute/instanceGroups/list">page</a> to ensure that all instances are created for this particular <a href="#google-compute-engine-cluster">instance group</a>.</p> <p>If you see a spinning circle next to the instance group, for longer than a few minutes, it can indicate that an error occurred. You can click the instance group name to see the error message (e.g. insufficient resource quota).</p> <p><strong>Note</strong>: The default quota for compute resources such as “CPUs”, “In-use IP addresses” and “Persistent Disk Standard (GB)” might be insufficient for your fuzzing cluster needs. You can check your current quota <a href="https://console.cloud.google.com/iam-admin/quotas">here</a> and request more resources as needed.</p> <h3 id="non-google-compute-engine-bots"> <a href="#non-google-compute-engine-bots" class="anchor-heading" aria-labelledby="non-google-compute-engine-bots"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Non-Google Compute Engine bots </h3> <p>These bots should start within a minute after the startup script finishes execution (e.g. <code class="language-plaintext highlighter-rouge">$CONFIG_DIR/bot/setup/mac.bash</code> for macOS).</p> <p>You can verify the bots started by checking that their hostnames show up on the <em>Bots</em> page.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
