<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Setting up a fuzzing job - ClusterFuzz</title> <link rel="shortcut icon" href="/clusterfuzz-document-cn/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/clusterfuzz-document-cn/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-88024544-3"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-88024544-3'); </script> <script type="text/javascript" src="/clusterfuzz-document-cn/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/clusterfuzz-document-cn/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Setting up a fuzzing job | ClusterFuzz</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Setting up a fuzzing job" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation for ClusterFuzz" /> <meta property="og:description" content="Documentation for ClusterFuzz" /> <link rel="canonical" href="/clusterfuzz-document-cn/production-setup/setting-up-fuzzing-job/" /> <meta property="og:url" content="/clusterfuzz-document-cn/production-setup/setting-up-fuzzing-job/" /> <meta property="og:site_name" content="ClusterFuzz" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Setting up a fuzzing job" /> <script type="application/ld+json"> {"@type":"WebPage","headline":"Setting up a fuzzing job","description":"Documentation for ClusterFuzz","url":"/clusterfuzz-document-cn/production-setup/setting-up-fuzzing-job/","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/clusterfuzz-document-cn/" class="site-title lh-tight"> ClusterFuzz </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/" class="nav-list-link">ClusterFuzz</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/architecture/" class="nav-list-link">Architecture</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/getting-started/" class="nav-list-link">Getting started</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/getting-started/prerequisites/" class="nav-list-link">Prerequisites</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/getting-started/local-instance/" class="nav-list-link">Running a local instance</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/setting-up-fuzzing/" class="nav-list-link">Setting up fuzzing</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/setting-up-fuzzing/libfuzzer-and-afl/" class="nav-list-link">libFuzzer and AFL++</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/setting-up-fuzzing/blackbox-fuzzing/" class="nav-list-link">Blackbox fuzzing</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/setting-up-fuzzing/heartbleed-example/" class="nav-list-link">Heartbleed example</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/production-setup/" class="nav-list-link">Production setup</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/production-setup/clusterfuzz/" class="nav-list-link">ClusterFuzz</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/production-setup/build-pipeline/" class="nav-list-link">Build pipeline</a></li><li class="nav-list-item active"><a href="/clusterfuzz-document-cn/production-setup/setting-up-fuzzing-job/" class="nav-list-link active">Setting up a fuzzing job</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/production-setup/setting-up-bots/" class="nav-list-link">Setting up bots</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/using-clusterfuzz/" class="nav-list-link">Using ClusterFuzz</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/using-clusterfuzz/ui-overview/" class="nav-list-link">UI overview</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/using-clusterfuzz/workflows/" class="nav-list-link">Workflows</a><ul class="nav-list"><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/workflows/triaging-new-crashes/" class="nav-list-link">Triaging new crashes</a> </li><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/workflows/fixing-a-bug/" class="nav-list-link">Fixing a bug</a> </li><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/workflows/analyzing-fuzzing-performance/" class="nav-list-link">Analyzing fuzzer performance</a> </li><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/workflows/uploading-a-testcase/" class="nav-list-link">Uploading a testcase</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/using-clusterfuzz/advanced/" class="nav-list-link">Advanced features</a><ul class="nav-list"><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/advanced/access-control/" class="nav-list-link">Access control</a> </li><li class="nav-list-item "> <a href="/clusterfuzz-document-cn/using-clusterfuzz/advanced/code-coverage/" class="nav-list-link">Code coverage</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/contributing-code/" class="nav-list-link">Contributing code</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/contributing-code/source-code/" class="nav-list-link">Source code</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/contributing-code/running-unit-tests/" class="nav-list-link">Running unit tests</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/contributing-code/staging-changes/" class="nav-list-link">Staging changes</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/clusterfuzz-document-cn/reference/" class="nav-list-link">Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/clusterfuzz-document-cn/reference/glossary/" class="nav-list-link">Glossary</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/reference/coverage-guided-vs-blackbox/" class="nav-list-link">Coverage guided vs blackbox fuzzing</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/reference/job-definition/" class="nav-list-link">Job definition</a></li><li class="nav-list-item "><a href="/clusterfuzz-document-cn/reference/faq/" class="nav-list-link">FAQ</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search ClusterFuzz" aria-label="Search ClusterFuzz" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/google/clusterfuzz" class="site-button" > ClusterFuzz on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/clusterfuzz-document-cn/production-setup/">Production setup</a></li> <li class="breadcrumb-nav-list-item"><span>Setting up a fuzzing job</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="setting-up-a-fuzzing-job"> <a href="#setting-up-a-fuzzing-job" class="anchor-heading" aria-labelledby="setting-up-a-fuzzing-job"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up a fuzzing job </h1> <p>This page walks you through setting up a fuzzing job in production. That process repeats the steps described in <a href="/clusterfuzz-document-cn/setting-up-fuzzing/">setting up fuzzing</a>, but also requires extra configuration for automated build updates.</p> <ul id="markdown-toc"> <li><a href="#setting-up-a-fuzzing-job" id="markdown-toc-setting-up-a-fuzzing-job">Setting up a fuzzing job</a> <ul> <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li> <li><a href="#creating-a-job-definition" id="markdown-toc-creating-a-job-definition">Creating a job definition</a></li> <li><a href="#specifying-a-continuous-build" id="markdown-toc-specifying-a-continuous-build">Specifying a continuous build</a></li> <li><a href="#advanced-options" id="markdown-toc-advanced-options">Advanced options</a> <ul> <li><a href="#ignoring-outdated-revisions" id="markdown-toc-ignoring-outdated-revisions">Ignoring outdated revisions</a></li> <li><a href="#linking-to-documentation" id="markdown-toc-linking-to-documentation">Linking to documentation</a></li> <li><a href="#job-definition-reference" id="markdown-toc-job-definition-reference">Job definition reference</a></li> </ul> </li> </ul> </li> </ul><hr /> <h2 id="prerequisites"> <a href="#prerequisites" class="anchor-heading" aria-labelledby="prerequisites"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites </h2> <p>To take full advantage of continuous fuzzing, you should set up a <a href="/clusterfuzz-document-cn/production-setup/build-pipeline/">build pipeline</a> first. By doing this, ClusterFuzz will automatically find bugs in your most recent changes, report ranges of commits where regressions are introduced, and verify fixes.</p> <p>If you wish to run with a single build while preparing a <a href="/clusterfuzz-document-cn/production-setup/build-pipeline/">build pipeline</a>, you can follow the <a href="/clusterfuzz-document-cn/setting-up-fuzzing/">setting up fuzzing</a> instructions directly.</p> <h2 id="creating-a-job-definition"> <a href="#creating-a-job-definition" class="anchor-heading" aria-labelledby="creating-a-job-definition"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a job definition </h2> <p>You can create a job definition on the <em>Jobs</em> page. To understand the process of job creation, see <a href="/clusterfuzz-document-cn/setting-up-fuzzing/">setting up fuzzing</a>. That page explains the difference between two fuzzing approaches (<a href="/clusterfuzz-document-cn/reference/coverage-guided-vs-blackbox/">coverage guided vs blackbox</a>) and provides guidance on how to set up a job for each of those.</p> <h2 id="specifying-a-continuous-build"> <a href="#specifying-a-continuous-build" class="anchor-heading" aria-labelledby="specifying-a-continuous-build"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Specifying a continuous build </h2> <p>To allow ClusterFuzz to take advantage of your <a href="/clusterfuzz-document-cn/production-setup/build-pipeline/">build pipeline</a> you must point to the <a href="https://cloud.google.com/storage/">Google Cloud Storage</a> bucket where your builds are stored in your job definition’s “Environment String”.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RELEASE_BUILD_BUCKET_PATH = gs://my-bucket/my-build-([0-9]+).zip
CUSTOM_BINARY = False

# These are only needed for blackbox fuzzing.
APP_NAME = myapp
APP_ARGS = -args -to -pass -to -myapp
...
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">RELEASE_BUILD_BUCKET_PATH</code> in the above example is a regular expression that specifies which bucket to read build archives from. Any files in the bucket that match the specified expression are treated as potential builds for this job. In this example, a build at the path <code class="language-plaintext highlighter-rouge">gs://my-bucket/my-build-123.zip</code> would be a match, and would be used by this job.</p> <p>The <code class="language-plaintext highlighter-rouge">([0-9]+)</code> regex in <code class="language-plaintext highlighter-rouge">RELEASE_BUILD_BUCKET_PATH</code> is used to compute the <a href="/clusterfuzz-document-cn/reference/glossary/#revision">revision number</a> for this build. This is used to determine which builds are newer than others. The build with the highest revision number will always be selected for fuzzing. ClusterFuzz expects that any build with a greater revision number than another is the newer build.</p> <p><strong>Note</strong>: The parentheses around the revision number regex are required and is the match group that ClusterFuzz uses to determine which part of the expression represents the revision number.</p> <p>For a complete list of options, look at <code class="language-plaintext highlighter-rouge">bot/env.yaml</code> in the source checkout.</p> <h2 id="advanced-options"> <a href="#advanced-options" class="anchor-heading" aria-labelledby="advanced-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Advanced options </h2> <h3 id="ignoring-outdated-revisions"> <a href="#ignoring-outdated-revisions" class="anchor-heading" aria-labelledby="ignoring-outdated-revisions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ignoring outdated revisions </h3> <p>In addition to the variables defined above, you may also define the <code class="language-plaintext highlighter-rouge">MIN_REVISION</code> variable. This can be useful when you make significant, non-backwards-compatible changes in your build such that older revisions will not work properly and need to be discarded.</p> <h3 id="linking-to-documentation"> <a href="#linking-to-documentation" class="anchor-heading" aria-labelledby="linking-to-documentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Linking to documentation </h3> <p>A job can specify a <code class="language-plaintext highlighter-rouge">HELP_URL</code> which each test case report for this job will link to. This allows you to provide instructions to developers on how they should treat the bugs they are assigned.</p> <h3 id="job-definition-reference"> <a href="#job-definition-reference" class="anchor-heading" aria-labelledby="job-definition-reference"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Job definition reference </h3> <p>For a more comprehensive overview of the options, see the <a href="/clusterfuzz-document-cn/reference/job-definition/">job definition</a> reference page.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
